// =================================================================
// ██████╗██╗  ██╗ █████╗ ████████╗███████╗██████╗  █████╗ 
// ██╔════╝██║  ██║██╔══██╗╚══██╔══╝██╔════╝██╔══██╗██╔══██╗
// ██║     ███████║███████║   ██║   █████╗  ██████╔╝███████║
// ██║     ██╔══██║██╔══██║   ██║   ██╔══╝  ██╔══██╗██╔══██║
// ╚██████╗██║  ██║██║  ██║   ██║   ███████╗██║  ██║██║  ██║
//  ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝   ╚═╝   ╚══════╝╚═╝  ╚═╝╚═╝  ╚═╝
// GENERATED BY CLAUDE: ChatEra v1.0 – 2025-05-13
// =================================================================

/**
 * █▀█ █▀▀ █▀▀ █ █▀ ▀█▀ █▀█ ▄▀█ ▀█▀ █ █▀█ █▄░█   █▀█ ▄▀█ █▀▀ █▀▀
 * █▀▄ ██▄ █▄█ █ ▄█ ░█░ █▀▄ █▀█ ░█░ █ █▄█ █░▀█   █▀▀ █▀█ █▄█ ██▄
 * 
 * [CODEX] Registration Page
 * 
 * New user account creation page with secure registration
 * process and nostalgic MSN-inspired visual design elements.
 * 
 * Features:
 * - Cross-platform registration flow for web and desktop
 * - Email verification initiation
 * - Password strength validation
 * - Terms of service integration
 * - Smooth onboarding transition
 */

import React, { useEffect } from 'react';
import Head from 'next/head';
import { useRouter } from 'next/router';
import { motion } from 'framer-motion';
import { useAuth } from '@/lib/auth';
import AuthCard from '@/components/auth/AuthCard';
import RegisterForm from '@/components/auth/RegisterForm';

/**
 * [H4X] REGISTRATION PAGE
 * 
 * Entry point for new users to create accounts
 */
const RegisterPage: React.FC = () => {
  const router = useRouter();
  const { status } = useAuth();
  
  // Handle redirect if already authenticated
  useEffect(() => {
    if (status === 'authenticated') {
      router.replace('/onboarding');
    }
  }, [status, router]);
  
  // Background animation variants
  const backgroundVariants = {
    initial: {
      backgroundPosition: '0% 0%',
    },
    animate: {
      backgroundPosition: '100% 100%',
      transition: {
        duration: 20,
        ease: 'linear',
        repeat: Infinity,
        repeatType: 'reverse' as const,
      },
    },
  };
  
  // Floating bubble animations
  const bubbleVariants = {
    initial: (i: number) => ({
      y: 0,
      x: 0,
      opacity: 0.2 + Math.random() * 0.3,
    }),
    animate: (i: number) => ({
      y: [0, -15, 0],
      x: [0, i % 2 === 0 ? 10 : -10, 0],
      opacity: [0.2 + Math.random() * 0.3, 0.4 + Math.random() * 0.3, 0.2 + Math.random() * 0.3],
      transition: {
        duration: 3 + Math.random() * 2,
        repeat: Infinity,
        repeatType: 'reverse',
        ease: 'easeInOut',
        delay: i * 0.2,
      },
    }),
  };
  
  return (
    <>
      <Head>
        <title>Create Account | ChatEra</title>
        <meta name="description" content="Create a new ChatEra account to start messaging with friends" />
      </Head>
      
      <motion.div 
        className="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-msn-gray-100 to-msn-gray-200 dark:from-msn-gray-900 dark:to-msn-gray-800"
        initial="initial"
        animate="animate"
        variants={backgroundVariants}
      >
        {/* Dancing gradient background elements */}
        <div className="absolute inset-0 overflow-hidden opacity-30 dark:opacity-20 pointer-events-none">
          <div className="absolute -top-[30%] -left-[10%] w-[70%] h-[70%] rounded-full bg-msn-purple/30 blur-[120px]" />
          <div className="absolute -bottom-[30%] -right-[10%] w-[70%] h-[70%] rounded-full bg-msn-blue/30 blur-[120px]" />
          <div className="absolute top-[40%] right-[20%] w-[40%] h-[40%] rounded-full bg-msn-green/20 blur-[100px]" />
        </div>
        
        {/* Nostalgic floating bubbles */}
        <div className="absolute inset-0 overflow-hidden pointer-events-none">
          {[...Array(6)].map((_, i) => (
            <motion.div
              key={i}
              className={`absolute rounded-full bg-gradient-to-br ${
                i % 3 === 0 ? 'from-msn-blue/20 to-msn-blue/40' :
                i % 3 === 1 ? 'from-msn-green/20 to-msn-green/40' :
                'from-msn-purple/20 to-msn-purple/40'
              }`}
              style={{
                width: 40 + Math.random() * 60,
                height: 40 + Math.random() * 60,
                left: `${10 + Math.random() * 80}%`,
                top: `${10 + Math.random() * 80}%`,
              }}
              custom={i}
              variants={bubbleVariants}
              initial="initial"
              animate="animate"
            />
          ))}
        </div>
        
        {/* Main content */}
        <div className="z-10 w-full max-w-md">
          <AuthCard 
            title="Create an account"
            subtitle="Join ChatEra and connect with friends"
            footer={
              <div>
                By creating an account, you agree to our Terms of Service and Privacy Policy
              </div>
            }
          >
            <RegisterForm />
          </AuthCard>
        </div>
      </motion.div>
    </>
  );
};

export default RegisterPage;
